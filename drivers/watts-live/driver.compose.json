{
  "name": {
    "en": "Watts live"
  },
  "class": "other",
  "capabilities": [
    "meter_power.imported",
    "meter_power.exported",
    "measure_power",
    "measure_power.l1",
    "measure_power.l2",
    "measure_power.l3",
    "measure_voltage.l1",
    "measure_voltage.l2",
    "measure_voltage.l3",
    "measure_current.l1",
    "measure_current.l2",
    "measure_current.l3",
    "measure_power.negative_active",
    "measure_power.negative_l1",
    "measure_power.negative_l2",
    "measure_power.negative_l3",
    "measure_negative_reactive_energy",
    "measure_power.negative_reactive",
    "measure_positive_reactive_energy",
    "measure_power.positive_reactive"
  ],
  "capabilitiesOptions": {
    "meter_power.imported": {
      "title": { "en": "Imported Energy" }
    },
    "meter_power.exported": {
      "title": { "en": "Exported Energy" }
    },
    "measure_voltage.l1": {
      "title": {"en": "Voltage L1"}
    },
    "measure_voltage.l2": {
      "title": {"en": "Voltage L2"}
    },
    "measure_voltage.l3": {
      "title": {"en": "Voltage L3"}
    },
    "measure_current.l1": {
      "title": {"en": "Current L1"}
    },
    "measure_current.l2": {
      "title": {"en": "Current L2"}
    },
    "measure_current.l3": {
      "title": {"en": "Current L3"}
    },
    "measure_power": {
      "title": {"en": "Total Power"}
    },
    "measure_power.l1": {
      "title": {"en": "Power L1"}
    },
    "measure_power.l2": {
      "title": {"en": "Power L2"}
    },
    "measure_power.l3": {
      "title": {"en": "Power L3"}
    },
    "measure_power.negative_active": {
      "title": {"en": "Total Negative Power"}
    },
    "measure_power.negative_l1": {
      "title": {"en": "Negative Power L1"}
    },
    "measure_power.negative_l2": {
      "title": {"en": "Negative Power L2"}
    },
    "measure_power.negative_l3": {
      "title": {"en": "Negative Power L3"}
    },
    "measure_power.negative_reactive": {
      "title": {"en": "Negative Reactive Power"}
    },
    "measure_power.positive_reactive": {
      "title": {"en": "Positive Reactive Power"}
    },
    "meter_power.positive_reactive": {
      "title": {"en": "Positive Reactive Energy"}
    },
    "meter_power.negative_reactive": {
      "title": {"en": "Negative Reactive Energy"}
    }
    
  },
  "energy": {
    "cumulative": true,
    "cumulativeImportedCapability": "meter_power.imported",
    "cumulativeExportedCapability": "meter_power.exported"
  },
  "platforms": [
    "local"
  ],
  "connectivity": ["lan","cloud"],
  "$extends": [
    "defaults"
  ],
  "pair": [
    {
      "id": "start",
      "template": "list",
      "options": {
        "title": "Select MQTT Method",
        "items": [
          { "id": "scanno", "name": "Use Homey's MQTT Client (nl.scanno.mqtt)" },
          { "id": "custom", "name": "Use a custom MQTT server" }
        ]
      },
      "next": "mqtt_config"
    },
    {
      "id": "mqtt_config",
      "template": "form",
      "options": {
        "title": "Configure MQTT Server",
        "form": [
          { "type": "text", "label": "MQTT Host", "id": "mqttHost", "required": true },
          { "type": "number", "label": "MQTT Port", "id": "mqttPort", "defaultValue": 1883, "required": true },
          { "type": "text", "label": "MQTT Username (optional)", "id": "mqttUsername" },
          { "type": "password", "label": "MQTT Password (optional)", "id": "mqttPassword" },
          { "type": "checkbox", "label": "Use TLS", "id": "mqttUseTLS" }
        ]
      },
      "next": "waiting_for_devices"
    },
    {
      "id": "waiting_for_devices",
      "template": "message",
      "options": {
        "title": "Listening for devices...",
        "message": "Please wait while we search for devices on the MQTT server."
      }
    },
    {
      "id": "select_device",
      "template": "list",
      "options": {
        "title": "Select a Device",
        "items": "{{devices}}"
      },
      "next": "done"
    },
    {
      "id": "done",
      "template": "final",
      "options": {
        "title": "Finished",
        "message": "The device has been paired successfully."
      }
    }
  ]  
}